async function chargerDonnees(e){var t=await fetch(e),r=await t.text();return r}function roundDecimal(e,t){t=t||2;var r=Math.pow(10,t);return Math.round(e*r)/r}function style_point(e,t,r="green"){var o=document.querySelector("#map"),c=o.querySelectorAll("circle");c.forEach(o=>{parseFloat(o.getAttribute("lat"))==parseFloat(e)&&parseFloat(o.getAttribute("lng"))==parseFloat(t)&&(o.setAttribute("r","1.5%"),o.setAttribute("fill",r),o.setAttribute("class","innerCircle"))})}function product_style(){var e=positions.length-1;if(style_point(positions[0].lat,positions[0].lng,couleur="yellow"),style_point(positions[e].lat,positions[e].lng,couleur="RebeccaPurple"),positions.length>2)for(var t=1;t<e;t++)style_point(positions[t].lat,positions[t].lng,couleur="red")}function recup_routing(e){positions.push({lat:parseFloat(e.target.getAttribute("lat")),lng:parseFloat(e.target.getAttribute("lng")),nom:e.target.getAttribute("nom"),cX:e.clientX,sX:e.screenX,cY:e.clientY,sY:e.screenY}),document.querySelector("#dep_centroid_result").value=`Centre du d√©partement : ${e.target.getAttribute("nom")}`,notyf.success("Position prise en compte!")}function message_positions(){0==positions.length&&(notyf.error("Aucune position prise en compte"),notyf.open({type:"warning",message:"Recommencer, Merci!",duration:4e3}))}function affichage_points(){document.querySelector("#points").innerHTML="";var e=0;0==positions.length?(notyf.error("Aucune position prise en compte"),notyf.open({type:"warning",message:"Au moins une position! Merci.",duration:4e3}),document.querySelector("#info_reset").classList.add("btn-primary"),document.querySelector("#info_reset").classList.remove("btn-danger"),document.querySelector("#afficher_positions").classList.add("btn-primary"),document.querySelector("#afficher_positions").classList.remove("btn-outline-success")):(positions.forEach(function(t){e+=1;var r=` Points n¬∞ ${e}:  Lng : ${t.lng.toFixed(4)}  et  Lat : ${t.lat.toFixed(4)} : ‚úπ ${t.nom} ‚úπ`,o=document.createTextNode(r);let c=document.createElement("li");c.appendChild(o),document.querySelector("#points").appendChild(c)}),document.querySelector("#info_reset").classList.remove("btn-primary"),document.querySelector("#info_reset").classList.add("btn-danger"),document.querySelector("#afficher_positions").classList.remove("btn-primary"),document.querySelector("#afficher_positions").classList.add("btn-outline-success"))}function line_svg(e,t){var r=document.querySelector("#carte"),o="http://www.w3.org/2000/svg",c=document.createElementNS(o,"path"),n=parseFloat(e.cX),s=parseFloat(e.cY),i=parseFloat(t.cX),u=parseFloat(t.cY),l=.5*(i+n),a=.5*(u+s),d=Math.atan2(u-s,i-n)-Math.PI/2,m=30,y=l+m*Math.cos(d),b=a+m*Math.sin(d);c.setAttribute("fill","transparent"),c.setAttribute("stroke-linecap","round"),c.setAttribute("stroke","#a0a"),c.setAttribute("stroke-width","4"),c.setAttribute("class","line_class");var p="M"+n+" "+s+" Q "+y.toFixed(4)+" "+b.toFixed(4)+" "+i+" "+u;c.setAttribute("d",p),console.log(c),r.appendChild(c)}function distance_routing(){if(affichage_points(),positions.length>0){var e=positions.length-1;if(0==positions.length)notyf.error("Aucune position prise en compte"),notyf.open({type:"warning",message:"Recommencer, Merci!",duration:4e3}),document.querySelector("#info_reset").classList.add("btn-primary"),document.querySelector("#info_reset").classList.remove("btn-danger"),document.querySelector("#afficher_positions").classList.add("btn-primary"),document.querySelector("#afficher_positions").classList.remove("btn-outline-success");else if(positions.length>1&&positions.length<3){product_style();var t=turf.point([parseFloat(positions[0].lng),parseFloat(positions[0].lat)]),r=turf.point([positions[e].lng,positions[e].lat]),o={units:"kilometers"},c=turf.rhumbDistance(t,r,o);document.querySelector("#turf").value=`${roundDecimal(c)} KM`;var n={longitude:positions[0].lng,latitude:positions[0].lat},s={longitude:positions[e].lng,latitude:positions[e].lat},i=window.geolib.getDistance(n,s)/1e3;document.querySelector("#geolib").value=`${i} KM`,line_svg(positions[0],positions[e]),document.querySelector("#info_reset").classList.remove("btn-primary"),document.querySelector("#info_reset").classList.add("btn-danger"),document.querySelector("#remove_distance").classList.remove("btn-primary"),document.querySelector("#remove_distance").classList.add("btn-dark")}else notyf.error("Au plus deux points , Merci !"),notyf.open({type:"warning",message:"Il faut 2 positions !",duration:2e3})}}function centre_routing(){if(affichage_points(),positions.length>0){var e=positions.length-1;if(0==positions.length)notyf.error("Aucune position prise en compte"),notyf.open({type:"warning",message:"Recommencer, Merci!",duration:4e3}),document.querySelector("#info_reset").classList.add("btn-primary"),document.querySelector("#info_reset").classList.remove("btn-danger"),document.querySelector("#afficher_positions").classList.add("btn-primary"),document.querySelector("#afficher_positions").classList.remove("btn-outline-success");else if(positions.length>1&&positions.length<3){product_style();var t={longitude:positions[0].lng,latitude:positions[0].lat},r={longitude:positions[e].lng,latitude:positions[e].lat},o=window.geolib.getCenter([t,r]);document.querySelector("#lat_centre_geolib").value=`Lat : ${o.latitude}`,document.querySelector("#lng_centre_geolib").value=`Lng:  ${o.longitude}`;var c={latitude:parseFloat(o.latitude),longitude:parseFloat(o.longitude)};recup_tablo_routing();var n=window.geolib.findNearest(c,tablo_dico);style_point(n.latitude,n.longitude,couleur="black"),document.querySelector("#info_reset").classList.remove("btn-primary"),document.querySelector("#info_reset").classList.add("btn-danger"),document.querySelector("#remove_centre").classList.remove("btn-primary"),document.querySelector("#remove_centre").classList.add("btn-dark")}else notyf.error("Au plus deux poitns !"),notyf.open({type:"warning",message:"Il faut 2 positions !",duration:2e3})}}function recup_tablo_routing(){var e=document.querySelector("#map"),t=e.querySelectorAll("circle");t.forEach(function(e){tablo.push([parseFloat(e.getAttribute("lat")),parseFloat(e.getAttribute("lng"))]),tablo_dico.push({latitude:parseFloat(e.getAttribute("lat")),longitude:parseFloat(e.getAttribute("lng"))})})}function proxi_routing(){var e=document.querySelector("#lat_geolib").value,t=document.querySelector("#lng_geolib").value;if(""!=e&&""!=t)if(e.match(/[+-]?([0-9]*[.])?[0-9]+/)||t.match(/[+-]?([0-9]*[.])?[0-9]+/)){var r={latitude:parseFloat(e),longitude:parseFloat(t)};recup_tablo_routing();var o=window.geolib.findNearest(r,tablo_dico);document.querySelector("#lat_result").value=`Lat : ${o.latitude}`,document.querySelector("#lng_result").value=`Lng:  ${o.longitude}`,style_point(o.latitude,o.longitude,couleur="violet"),document.querySelector("#info_reset").classList.remove("btn-primary"),document.querySelector("#info_reset").classList.add("btn-danger"),document.querySelector("#remove_proximite").classList.remove("btn-primary"),document.querySelector("#remove_proximite").classList.add("btn-dark")}else notyf.error(" Type num√©rique ou decimal ! Merci...üßê !"),document.querySelector("#lat_geolib").value="",document.querySelector("#lng_geolib").value="";else notyf.error("Erreur, veuillez les champs latitude et longitude , Merci !"),notyf.open({type:"warning",message:"Champs latitude et longitude,svp !",duration:2e3})}function buffer_point(){if(affichage_points(),positions.length>0){var e=document.querySelector("#map"),t=e.querySelectorAll("circle"),r=document.querySelector("#r_buffer").value;message_positions();var o=positions.length-1;""==r?(r="10%",t.forEach(e=>{if(parseFloat(e.getAttribute("lat"))==parseFloat(positions[o].lat)&&parseFloat(e.getAttribute("lng"))==parseFloat(positions[o].lng)){var t=document.querySelector("#carte"),c="http://www.w3.org/2000/svg",n=document.createElementNS(c,"circle");n.setAttribute("cx",e.getAttribute("cx")),n.setAttribute("cy",e.getAttribute("cy")),n.setAttribute("r",r),n.setAttribute("fill","red"),n.setAttribute("opacity","0.3"),n.setAttribute("stroke","none"),n.setAttribute("onmouseover","evt.target.setAttribute('stroke','tomato');"),n.setAttribute("onmouseout","evt.target.setAttribute('stroke', 'none');"),n.setAttribute("stroke-width","0.8"),n.setAttribute("class","buffer_class"),t.appendChild(n),document.querySelector("#remove_buffer").classList.remove("btn-primary"),document.querySelector("#remove_buffer").classList.add("btn-dark"),document.querySelector("#r_buffer").value=r,document.querySelector("#info_reset").classList.remove("btn-primary"),document.querySelector("#info_reset").classList.add("btn-danger")}})):r.match(/[+-]?([0-9]*[.])?[0-9]+/)?t.forEach(e=>{if(parseFloat(e.getAttribute("lat"))==parseFloat(positions[o].lat)&&parseFloat(e.getAttribute("lng"))==parseFloat(positions[o].lng)){var t=document.querySelector("#carte"),c="http://www.w3.org/2000/svg",n=document.createElementNS(c,"circle");n.setAttribute("cx",e.getAttribute("cx")),n.setAttribute("cy",e.getAttribute("cy")),n.setAttribute("r",r),n.setAttribute("fill","red"),n.setAttribute("opacity","0.6"),n.setAttribute("stroke","none"),n.setAttribute("onmouseover","evt.target.setAttribute('stroke','tomato');"),n.setAttribute("onmouseout","evt.target.setAttribute('stroke', 'none');"),n.setAttribute("stroke-width","0.8"),n.setAttribute("class","buffer_class"),t.appendChild(n),document.querySelector("#remove_buffer").classList.remove("btn-primary"),document.querySelector("#remove_buffer").classList.add("btn-dark"),document.querySelector("#r_buffer").value=r,document.querySelector("#info_reset").classList.remove("btn-primary"),document.querySelector("#info_reset").classList.add("btn-danger")}}):(notyf.error(" Type num√©rique ou decimal ! Merci...üßê!"),notyf.open({type:"warning",message:"Il faut 2 positions !",duration:2e3}))}}function effacer_buffer(){var e=document.querySelector("#carte"),t=document.querySelector(".buffer_class");e.removeChild(t),notyf.success(`buffer de rayon :${t.getAttribute("r")} effac√© avec succ√®s, Merci. !`),document.querySelector("#points").innerHTML="",document.querySelector("#remove_buffer").classList.add("btn-primary"),document.querySelector("#remove_buffer").classList.remove("btn-dark"),document.querySelector("#r_buffer").value=""}function gest_couche2(e,t,r,o){var c=document.querySelector(t),n=document.querySelector(r),s=document.querySelector(o),i=document.querySelector(e);c.checked?(i.style.display="block",n.classList.remove("on_btn"),s.classList.remove("on_btn")):(i.style.display="none",n.classList.add("on_btn"),s.classList.add("on_btn"))}function gest_couche_reg(e,t,r,o){var c=document.querySelector(t),n=document.querySelector(r),s=document.querySelector(o),i=document.querySelector(e);c.checked?(i.style.display="block",n.classList.remove("on_btn"),s.classList.remove("on_btn"),document.querySelector("#dep").setAttribute("fill","none")):(i.style.display="none",n.classList.add("on_btn"),s.classList.add("on_btn"),document.querySelector("#dep").setAttribute("fill","cyan"))}function gest_couche_dep(e,t,r,o){var c=document.querySelector(t),n=document.querySelector(r),s=document.querySelector(o),i=document.querySelector(e);c.checked?(i.style.display="block",n.classList.remove("on_btn"),s.classList.remove("on_btn")):(i.style.display="none",n.classList.add("on_btn"),s.classList.add("on_btn"),document.querySelector("#region").setAttribute("stroke","red"),document.querySelector("#region").setAttribute("stroke-width","0.5%"))}function gest_couche_centroid(e,t,r,o){var c=document.querySelector(t),n=document.querySelector(r),s=document.querySelector(o),i=document.querySelector(e);c.checked?(i.style.display="block",n.classList.remove("on_btn"),s.classList.remove("on_btn")):(i.style.display="none",n.classList.add("on_btn"),s.classList.add("on_btn"),document.querySelector("#dep").setAttribute("fill","cyan"),document.querySelector("#dep").setAttribute("opacity","0.6%"))}function fct_region(e){var t=e.target.getAttribute("nom"),r=e.target.getAttribute("id");r=r.replace("reg_",""),document.querySelector("#reg_result").value=`( ${r} ) -- ${t}`}function off_region(e){document.querySelector("#reg_result").value=""}function fct_dep(e){var t=e.target.getAttribute("nom"),r=e.target.getAttribute("id");r=r.replace("dep_",""),document.querySelector("#dep_result").value=`( ${r} ) -- ${t}`;var o=e.target.getAttribute("gid"),c=document.getElementById("reg_"+o),n=c.getAttribute("id");n=n.replace("reg_",""),document.querySelector("#reg_result").value=`( ${n} ) -- ${c.getAttribute("nom")}`}function off_dep(e){document.querySelector("#dep_result").value="",document.querySelector("#reg_result").value=""}function fct_centroid(e){var t=e.target.getAttribute("nom"),r=e.target.getAttribute("id");document.querySelector("#dep_result").value=`( ${r} ) -- ${t}`;var o=e.target.getAttribute("gid"),c=document.getElementById("reg_"+o),n=c.getAttribute("id");n=n.replace("reg_",""),document.querySelector("#reg_result").value=`( ${n} ) -- ${c.getAttribute("nom")}`}function off_centroid(e){document.querySelector("#dep_result").value="",document.querySelector("#dep_centroid_result").value="",document.querySelector("#reg_result").value=""}function reset(){positions=[],document.querySelector("#points").innerHTML="",document.querySelector("#geolib").value="",document.querySelector("#turf").value="",document.querySelector("#lat_centre_geolib").value="",document.querySelector("#lng_centre_geolib").value="",document.querySelector("#lat_result").value="",document.querySelector("#lng_result").value="",document.querySelector("#lat_geolib").value="",document.querySelector("#lng_geolib").value="",document.querySelector("#lat_centre_geolib").value="",document.querySelector("#lng_centre_geolib").value="",document.querySelector("#r_buffer").value="",document.querySelector("#afficher_locate").classList.add("btn-primary"),document.querySelector("#afficher_locate").classList.remove("btn-success"),document.querySelector("#info_reset").classList.add("btn-primary"),document.querySelector("#info_reset").classList.remove("btn-danger"),document.querySelector("#afficher_positions").classList.add("btn-primary"),document.querySelector("#afficher_positions").classList.remove("btn-outline-success"),document.querySelector("#reg_check").checked,document.querySelector("#dep_check").checked,document.querySelector("#map_check").checked,notyf.dismissAll(),window.location.reload(!0)}function ctrl_btn(e,t){document.querySelector(e).addEventListener("click",r=>{"btn btn-success"!=document.querySelector(e).className?(document.querySelector(e).classList.remove("btn-outline-success"),document.querySelector(e).classList.add("btn-success"),notyf.success("Fonctionnalit√© activ√©e !")):(document.querySelector(e).classList.remove("btn-success"),document.querySelector(e).classList.add("btn-outline-success"),notyf.error("Fonctionnalit√© d√©sactiv√©e !"));var o=document.querySelector(t).classList.contains("on_btn");document.querySelector(t).classList.toggle("on_btn"),Velocity(document.querySelector(t),o?"fadeIn":"fadeOut",{duration:1200}),r.preventDefault()})}function loadUrlTemperature(e){let t=e.coords.latitude,r=e.coords.longitude,o=`${URL_MAIN}?lat=${t}&lon=${r}&units=${UNITS}&APPID=${API_KEY}`;fetchApi(o)}async function fetchApi(e){let t=await fetch(e),{main:r,name:o}=await t.json();const c=r.temp.toFixed(1);var n=50,s=1,i=!0;c<0?(n=100,s=2):c<-5?(n=150,s=3):c>2&&(i=!0);new Snowflakes({color:"#5ECDEF",container:document.body,count:n,speed:s,stop:i,rotation:!0,minOpacity:.1,maxOpacity:.95,minSize:10,maxSize:25,types:6,width:void 0,height:void 0,wind:!0,zIndex:9999,autoResize:!0})}const d=new Date;let year=d.getFullYear();document.querySelector(".year").textContent=year;var notyf=new Notyf({duration:3e3,position:{x:"right",y:"top"},types:[{type:"warning",background:"orange",icon:{className:"material-icons",tagName:"i",text:"warning"}}]}),btns=()=>{function e(o){o.preventDefault(),a.removeEventListener("dblclick",e),a.addEventListener("dblclick",t);var c=3,n=1/c;i.x=o.clientX,i.y=o.clientY;var s=i.matrixTransform(r.getScreenCTM().inverse()),l={x:u.x,y:u.y,width:u.width,height:u.height,ease:Power2.easeOut};u.x-=(s.x-u.x)*(n-1),u.y-=(s.y-u.y)*(n-1),u.width*=n,u.height*=n,TweenLite.from(u,.5,l)}function t(){TweenLite.to(u,.4,{x:l.x,y:l.y,width:l.width,height:l.height,onComplete:function(){a.removeEventListener("dblclick",t),a.addEventListener("dblclick",e)}})}const r=document.querySelector("#carte"),o=e=>{const t=e.style.transform;let r=1,o=0,c=0;return t.includes("scale")&&(r=parseFloat(t.slice(t.indexOf("scale")+6))),t.includes("translateX")&&(o=parseInt(t.slice(t.indexOf("translateX")+11))),t.includes("translateY")&&(c=parseInt(t.slice(t.indexOf("translateY")+11))),{scale:r,x:o,y:c}},c=(e,t,r)=>"scale("+e+") translateX("+t+"%) translateY("+r+"%)",n=e=>{const{scale:t,x:n,y:s}=o(r);let i=0,u=0;switch(e){case"left":i=-3;break;case"right":i=3;break;case"up":u=-3;break;case"down":u=3}r.style.transform=c(t,n+i,s+u)},s=e=>{const{scale:t,x:n,y:s}=o(r);let i=.1;"out"==e&&(i*=-1),.1==t&&"out"==e&&(i=0),r.style.transform=c(t+i,n,s)};document.querySelector("#right-button").onclick=(()=>n("right")),document.querySelector("#up-button").onclick=(()=>n("up")),document.querySelector("#down-button").onclick=(()=>n("down")),document.querySelector("#zoom-in-button").onclick=(()=>s("in")),document.querySelector("#zoom-out-button").onclick=(()=>s("out")),document.querySelector("#left-button").addEventListener("click",()=>{n("left")});var i=r.createSVGPoint(),u=r.viewBox.baseVal,l={x:u.x,y:u.y,width:u.width,height:u.height};const a=document.querySelector(".loader_content");a.addEventListener("dblclick",e)};window.addEventListener("load",()=>{chargerDonnees("./02_page_svg_v2/php/map_france.php").then(function(e){document.querySelectorAll(".loader").className+=" hidden",document.querySelector("#chargeCarte").innerHTML=e,btns()})}),document.querySelector("#choixCarte").addEventListener("change",()=>{let e=document.querySelector("#choixCarte"),t=e.selectedOptions[0].value;chargerDonnees(t).then(function(e){document.querySelector("#chargeCarte").innerHTML=e,btns(),document.querySelector("#reg_check").checked=!0,document.querySelector("#dep_check").checked=!0,document.querySelector("#map_check").checked=!0,document.querySelector("#reg_label").classList.remove("on_btn"),document.querySelector("#dep_label").classList.remove("on_btn"),document.querySelector("#dep_centroid_label").classList.remove("on_btn"),document.querySelector("#reg_result").classList.remove("on_btn"),document.querySelector("#dep_result").classList.remove("on_btn"),document.querySelector("#dep_centroid_result").classList.remove("on_btn")})});var positions=[],tablo=[],tablo_dico=[];document.querySelector("#afficher_positions").addEventListener("click",affichage_points),document.querySelector("#calcul_distance").addEventListener("click",distance_routing),document.querySelector("#remove_distance").addEventListener("click",()=>{document.querySelector("#turf").value="",document.querySelector("#geolib").value="",document.querySelector("#remove_distance").classList.add("btn-primary"),document.querySelector("#remove_distance").classList.remove("btn-dark")}),document.querySelector("#calcul_centre").addEventListener("click",centre_routing),document.querySelector("#remove_centre").addEventListener("click",()=>{document.querySelector("#lat_centre_geolib").value="",document.querySelector("#lng_centre_geolib").value="",document.querySelector("#remove_centre").classList.add("btn-primary"),document.querySelector("#remove_centre").classList.remove("btn-dark")}),document.querySelector("#afficher_locate").addEventListener("click",()=>{navigator.geolocation.getCurrentPosition(e=>{var t=window.confirm(`Votre position est : latitude ${e.coords.latitude} et longitude ${e.coords.longitude}, Calculer votre proximit√© !`);1==t?(document.querySelector("#lat_geolib").value=e.coords.latitude,document.querySelector("#lng_geolib").value=e.coords.longitude,document.querySelector("#afficher_locate").classList.remove("btn-primary"),document.querySelector("#afficher_locate").classList.add("btn-success"),document.querySelector("#info_reset").classList.remove("btn-primary"),document.querySelector("#info_reset").classList.add("btn-danger")):notyf.success(" Pas de proximit√© ! Merci !")})}),document.querySelector("#calcul_proximite").addEventListener("click",proxi_routing),document.querySelector("#remove_proximite").addEventListener("click",()=>{document.querySelector("#lat_result").value="",document.querySelector("#lng_result").value="",document.querySelector("#lat_geolib").value="",document.querySelector("#lng_geolib").value="",document.querySelector("#remove_proximite").classList.add("btn-primary"),document.querySelector("#remove_proximite").classList.remove("btn-dark")}),document.querySelector("#calcul_buffer").addEventListener("click",buffer_point),document.querySelector("#remove_buffer").addEventListener("click",effacer_buffer),document.querySelector("#info_reset").addEventListener("click",reset),interact(".item").draggable({onmove:function(e){const t=e.target,r=t.getAttribute("data-x"),o=t.getAttribute("data-y"),c=parseFloat(r)||0,n=parseFloat(o)||0,s=e.dx,i=e.dy,u=c+s,l=n+i;t.style.transform=`translate(${u}px, ${l}px)`,t.setAttribute("data-x",u),t.setAttribute("data-y",l)},inertia:!0,restrict:{restriction:"parent"}}),interact(".dropzone").dropzone({accept:".item",overlap:.75,ondropactivate:function(e){const t=e.relatedTarget;t.classList.add("dragging")},ondropdeactivate:function(e){const t=e.relatedTarget;t.classList.remove("dragging","cannot-drop")},ondragenter:function(e){const t=e.relatedTarget;t.classList.remove("cannot-drop"),t.classList.add("can-drop")},ondragleave:function(e){const t=e.relatedTarget;t.classList.remove("can-drop"),t.classList.add("cannot-drop")}}),document.querySelector("#reog").addEventListener("click",()=>{var e=document.querySelector("#reog").className;if(e=e.replace("btn btn-primary mb-3 mt-3 ",""),"reog"!=e){var t=document.querySelector(".dropzone"),r=t.querySelectorAll(".item_off");document.querySelector("#reog").className+=" reog",r.forEach(function(e){e.classList.remove("item_off"),e.className+=" item"}),notyf.success("Vous pouvez r√©organiser les boites de fonctionnalit√©s")}else{t=document.querySelector(".dropzone"),r=t.querySelectorAll(".item");document.querySelector("#reog").classList.remove("reog"),r.forEach(function(e){e.classList.remove("item"),e.className+=" item_off"}),notyf.error("Fonctionnalit√© d√©sactiv√©e !")}});var rech=function(){if(""!=document.querySelector("#label_rech").value||""!=document.querySelector("#insee_rech").value){var e=document.querySelector("#choice_param_1"),t=document.querySelector("#choice_param_2"),r=document.querySelector("#label_rech").value,o=document.querySelector("#insee_rech").value;if(1==e.checked&&1==t.checked)notyf.error("D√©cocher une des deux cases!"),notyf.open({type:"warning",message:"Recommencer, Merci!",duration:4e3});else if(e.checked){var c=document.querySelector("#region"),n=c.querySelectorAll("path");n.forEach(function(e){var t=e.getAttribute("id");if(t=t.replace("reg_",""),e.getAttribute("nom").toLowerCase()==r.toLowerCase()){var c=document.getElementById(e.getAttribute("id"));c.setAttribute("fill","#6600CC"),c.setAttribute("stroke","tomato"),document.querySelector("#insee_rech").value=t,document.querySelector("#label_rech").value=e.getAttribute("nom"),document.querySelector("#submit_rech").classList.remove("btn-primary"),document.querySelector("#submit_rech").classList.add("btn-success"),document.querySelector("#remove_rech").classList.remove("btn-primary"),document.querySelector("#remove_rech").classList.add("btn-dark")}if(parseFloat(t)==parseFloat(o)){c=document.getElementById(e.getAttribute("id"));c.setAttribute("fill","#6600CC"),c.setAttribute("stroke","tomato"),document.querySelector("#insee_rech").value=t,document.querySelector("#label_rech").value=e.getAttribute("nom"),document.querySelector("#submit_rech").classList.remove("btn-primary"),document.querySelector("#submit_rech").classList.add("btn-success"),document.querySelector("#remove_rech").classList.remove("btn-primary"),document.querySelector("#remove_rech").classList.add("btn-dark")}}),notyf.success("Double-clique : Zoomer / D√©Zoomer")}else if(t.checked){var s=document.querySelector("#dep"),i=s.querySelectorAll("path");i.forEach(function(e){var t=e.getAttribute("id");if(t=t.replace("dep_",""),e.getAttribute("nom").toLowerCase()==r.toLowerCase()){var c=document.getElementById(e.getAttribute("id"));c.setAttribute("fill","#e00e6a"),document.querySelector("#insee_rech").value=t,document.querySelector("#label_rech").value=e.getAttribute("nom"),document.querySelector("#submit_rech").classList.remove("btn-primary"),document.querySelector("#submit_rech").classList.add("btn-success"),document.querySelector("#remove_rech").classList.remove("btn-primary"),document.querySelector("#remove_rech").classList.add("btn-dark")}if(parseFloat(t)==parseFloat(o)){c=document.getElementById(e.getAttribute("id"));c.setAttribute("fill","#e00e6a"),document.querySelector("#insee_rech").value=t,document.querySelector("#label_rech").value=e.getAttribute("nom"),document.querySelector("#submit_rech").classList.remove("btn-primary"),document.querySelector("#submit_rech").classList.add("btn-success"),document.querySelector("#remove_rech").classList.remove("btn-primary"),document.querySelector("#remove_rech").classList.add("btn-dark")}}),notyf.success("Double-clique : Zoomer / D√©Zoomer")}else notyf.error("Cocher une case, au plus!"),notyf.open({type:"warning",message:"Recommencer, Merci!",duration:4e3})}else notyf.error("Les champs sont vides"),notyf.open({type:"warning",message:"Recommencer, Merci!",duration:4e3})};document.querySelector("#submit_rech").addEventListener("click",rech),document.querySelector("#remove_rech").addEventListener("click",()=>{var e=document.querySelector("#label_rech").value,t=document.querySelector("#insee_rech").value,r=document.querySelector("#region"),o=r.querySelectorAll("path");o.forEach(function(r){if(r.getAttribute("nom").toLowerCase()==e.toLowerCase()){var o=document.getElementById(r.getAttribute("id"));o.removeAttribute("fill"),o.removeAttribute("stroke")}else r.removeAttribute("fill"),r.removeAttribute("stroke");if(parseFloat(r.getAttribute("id"))==parseFloat(t)){o=document.getElementById(r.getAttribute("id"));o.removeAttribute("fill"),o.removeAttribute("stroke")}else r.removeAttribute("fill"),r.removeAttribute("stroke")});var c=document.querySelector("#dep"),n=c.querySelectorAll("path");n.forEach(function(r){if(r.getAttribute("nom").toLowerCase()==e.toLowerCase()){var o=document.getElementById(r.getAttribute("id"));o.removeAttribute("fill")}else r.removeAttribute("fill");if(parseFloat(r.getAttribute("id"))==parseFloat(t)){o=document.getElementById(r.getAttribute("id"));o.removeAttribute("fill")}else r.removeAttribute("fill")}),document.querySelector("#choice_param_1").checked=!1,document.querySelector("#choice_param_2").checked=!1,document.querySelector("#label_rech").value="",document.querySelector("#insee_rech").value="",document.querySelector("#submit_rech").classList.add("btn-primary"),document.querySelector("#submit_rech").classList.remove("btn-success"),document.querySelector("#remove_rech").classList.add("btn-primary"),document.querySelector("#remove_rech").classList.remove("btn-dark")}),ctrl_btn("#btn_distance","#active_distance"),ctrl_btn("#btn_centre","#active_centre"),ctrl_btn("#btn_buffer","#active_buffer"),ctrl_btn("#btn_proximite","#active_proximite"),ctrl_btn("#btn_rech","#active_rech"),function(){let e=document.querySelector("#btn_lateral_hz");e.addEventListener("click",t=>{"btn btn-success"!=e.className?(e.classList.remove("btn-outline-success"),e.classList.add("btn-success"),document.querySelector("#barreHoz").style.transform="translateX(-620px)",notyf.success("Fonctionnalit√© activ√©e !")):(e.classList.remove("btn-success"),e.classList.add("btn-outline-success"),document.querySelector("#barreHoz").style.transform="translateX(0px)",notyf.error("Fonctionnalit√© d√©sactiv√©e !")),t.preventDefault()});let t=document.querySelector("#btn_lateral_vz");t.addEventListener("click",function(e){"btn btn-success"!=t.className?(t.classList.remove("btn-outline-success"),t.classList.add("btn-success"),document.querySelector("#barreVz").style.transform="translateY(-320px)",notyf.success("Fonctionnalit√© activ√©e !")):(t.classList.remove("btn-success"),t.classList.add("btn-outline-success"),document.querySelector("#barreVz").style.transform="translateY(0px)",notyf.error("Fonctionnalit√© d√©sactiv√©e !")),e.preventDefault()})}();var name_reg=["ILE-DE-FRANCE","CENTRE-VAL DE LOIRE","BOURGOGNE-FRANCHE-COMTE","NORMANDIE","HAUTS-DE-FRANCE","GRAND EST","PAYS DE LA LOIRE","BRETAGNE","NOUVELLE-AQUITAINE","OCCITANIE","AUVERGNE-RHONE-ALPES","PROVENCE-ALPES-COTE D'AZUR","CORSE"],name_dep=["AIN","AISNE","ALLIER","ALPES-DE-HAUTE-PROVENCE","HAUTES-ALPES","ALPES-MARITIMES","ARDECHE","ARDENNES","ARIEGE","AUBE","AUDE","AVEYRON","BOUCHES-DU-RHONE","CALVADOS","CANTAL","CHARENTE","CHARENTE-MARITIME","CHER","CORREZE","COTE-D'OR","COTES-D'ARMOR","CREUSE","DORDOGNE","DOUBS","DROME","EURE","EURE-ET-LOIR","FINISTERE","CORSE-DU-SUD","HAUTE-CORSE","GARD","HAUTE-GARONNE","GERS","GIRONDE","HERAULT","ILLE-ET-VILAINE","INDRE","INDRE-ET-LOIRE","ISERE","JURA","LANDES","LOIR-ET-CHER","LOIRE","HAUTE-LOIRE","LOIRE-ATLANTIQUE","LOIRET","LOT","LOT-ET-GARONNE","LOZERE","MAINE-ET-LOIRE","MANCHE","MARNE","HAUTE-MARNE","MAYENNE","MEURTHE-ET-MOSELLE","MEUSE","MORBIHAN","MOSELLE","NIEVRE","NORD","OISE","ORNE","PAS-DE-CALAIS","PUY-DE-DOME","PYRENEES-ATLANTIQUES","HAUTES-PYRENEES","PYRENEES-ORIENTALES","BAS-RHIN","HAUT-RHIN","RHONE","HAUTE-SAONE","SAONE-ET-LOIRE","SARTHE","SAVOIE","HAUTE-SAVOIE","PARIS","SEINE-MARITIME","SEINE-ET-MARNE","YVELINES","DEUX-SEVRES","SOMME","TARN","TARN-ET-GARONNE","VAR","VAUCLUSE","VENDEE","VIENNE","HAUTE-VIENNE","VOSGES","YONNE","TERRITOIRE DE BELFORT","ESSONNE","HAUTS-DE-SEINE","SEINE-SAINT-DENIS","VAL-DE-MARNE","VAL-D'OISE"],name_tablo=name_reg.concat(name_dep);autocomplete(document.getElementById("label_rech"),name_tablo);var id_reg=["11","24","27","28","32","44","52","53","75","76","84","93","94"],id_dep=["01","02","03","04","05","06","07","08","09","10","11","12","13","14","15","16","17","18","19","21","22","23","24","25","26","27","28","29","2A","2B","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","57","58","59","60","61","62","63","64","65","66","67","68","69","70","71","72","73","74","75","76","77","78","79","80","81","82","83","84","85","86","87","88","89","90","91","92","93","94","95"],id_tablo=id_reg.concat(id_dep);autocomplete(document.querySelector("#insee_rech"),id_tablo),["keyup","keypress","blur","change","keydown","focus","focusout","mouseleave"].forEach(e=>{document.querySelector("#label_rech").addEventListener(e,()=>{const e=document.querySelector("#label_rech").value;name_reg.includes(e)?document.querySelector("#choice_param_1").checked=!0:document.querySelector("#choice_param_1").checked=!1,name_dep.includes(e)?document.querySelector("#choice_param_2").checked=!0:document.querySelector("#choice_param_2").checked=!1})});const URL_MAIN="https://api.openweathermap.org/data/2.5/weather",API_KEY="8f57cb746c4c1d4b48b7f35eba6f6230",UNITS="metric";navigator.geolocation.getCurrentPosition(loadUrlTemperature);